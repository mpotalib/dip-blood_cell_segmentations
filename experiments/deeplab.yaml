data:
  train_images: data/train/images
  train_masks: data/train/masks
  train_annotations:
  val_images: data/val/images
  val_masks: data/val/masks
  val_annotations:
  test_images: data/test/images
  test_masks: data/test/masks
  test_annotations:
  class_mapping:
    background: 0
    n: 1
    b: 2

model:
  name: deeplab            # DeepLabV3-ResNet50
  in_channels: 3
  num_classes: 3
  pretrained_backbone: true

train:
  epochs: 35              # best epochs were mid-run; shorten to avoid late drift
  batch_size: 8            # fits T4; raise to 12â€“16 if memory allows
  lr: 0.0005               # lower LR to smooth late-epoch drift
  weight_decay: 0.0001
  num_workers: 4
  grad_clip: 1.0
  amp: true
  dice_weight: 0.55        # balance CE and Dice for generalization
  class_weights: [1.0, 1.2, 1.2]   # mild lift for nucleus/boundary
  lr_patience: 2

augmentation:
  train:
    horizontal_flip: true
    vertical_flip: true
    rotation: 20
    brightness_contrast: 0.15
    gaussian_noise: 0.0    # keep noise low for stability

logging:
  log_every: 10
  val_every: 1
  checkpoint_dir: outputs/deeplab/checkpoints
  save_all_checkpoints: false   # keep only last + best to save disk on Kaggle
  seed: 1337
